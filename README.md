# Taste Busan

**배포 링크**: [https://jwitter-mauve.vercel.app](https://taste-busan.vercel.app)

## 프로젝트 소개
Taste Busan은 부산의 맛집을 지도에 표시하여 사용자가 쉽게 맛집을 찾을 수 있도록 도와주는 사이트입니다. 기본적으로 맛집으로 등록된 가게 이외에도 사용자가 직접 맛집을 등록할 수 있고, 찜하기 기능을 통해 관심 있는 가게를 저장하고 관리할 수 있습니다. 

## 사용 기술
- **Frontend**: Next.js, React-Query, Redux, TailwindCSS, TypeScript
- **Backend**: Prisma (ORM), Superbase
- **Build**: Vite
- **Deploy**: Vercel

## 기능 소개
1. **지도 표시**
   - 등록된 맛집들은 지도 위에 마커로 표시됩니다.
   - 마커 클릭 시, 해당 가게에 대한 상세 정보가 표시됩니다.
2. **맛집 등록**
   - 사용자는 맛집 정보를 직접 입력하여 등록할 수 있습니다.
   - 등록한 맛집은 마이페이지에서 확인할 수 있습니다.
3. **찜하기 기능**
   - 사용자는 원하는 맛집을 찜할 수 있습니다. 
   -  찜한 맛집은 찜한 가게에서 확인할 수 있습니다.
4. **검색 기능**
   - 맛집 목록에서 가게 이름이나 지역명으로 검색 할 수 있습니다.

## 실행 화면

https://github.com/user-attachments/assets/a28493df-3886-45ea-9fe6-6dc2ea8b2ef3

## 프로젝트 후기 및 문제 해결
### 1. Map의 상태 관리
이번 프로젝트는 목표 중 하나는 Redux를 활용하는 것이었습니다. 그래서 map 생성과 마커 등록에 필요한 상태는 Redux를 사용해서 관리하려고 했습니다. 
처음에는 map의 상태도 Redux를 통해 관리하려고 했지만, map 객체는 직렬화할 수 없어서 초기에 오류가 발생했었습니다. 

Redux의 스타일 가이드를 참고해 보니 state와 action에는 직렬화가 불가능한 값을 넣지 말라고 명시가 되어 있었고, map의 상태를 어떻게 관리할지 고민하다가 Context API가 비슷한 역할을 한다는 생각이 들어 map의 상태만 Context API로 관리하는 방법으로 문제를 해결했습니다. 

### 2. 찜한 가게 페이지의 페이지네이션
찜한 가게 페이지에서는 사용자가 찜한 가게가 많을 경우 limit를 10으로 두어서, 10개 넘어가면 2페이지가 생성되고 페이지가 넘어가야 했습니다. 하지만 2페이지를 넘어가도록 다음을 클릭하면, URL은 변경이 되었지만 화면은 그대로 1 페이지만 나오는 문제가 생겼었습니다. 
문제해결을 위해 api와 LikePage 컴포넌트 내에서 page 값이 어떻게 들어오는지 확인해 보니 undifined로 page의 값이 제대로 들어오지 않고 있었습니다. 

컴포넌트에서 page의 값을 제대로 가져오지 못한다는 생각이 들어 검색을 해보니 params 값은 입력주솟값이라면, searchParams 사용해야 쿼리 스트링의 값을 가져올 수 있다는 걸 알게 되었습니다. 
그래서 searchParams page의 값을 가져오는 것으로 수정 후 다시 page 값이 제대로 들어오는지 확인해 보니 값이 정확하게 들어오고 페이지네이션도 정상 작동했습니다. 

### 3. 맛집 등록 시 주소 입력
맛집 등록 페이지에서 주소 등록은 react-daum-postcode를 사용해서 등록합니다. 이때 들어오는 데이터 중 lat와 lng의 데이터 타입으로 인해 오류가 발생했었습니다.

공공데이터에서 제공한 부산 맛집 데이터의 lat와 lng의 값은 number이기 때문에 prisma와 StoreType에서도 number로 작성했었습니다. 
하지만 react-daum-postcode의 값은 string으로 들어와서 오류가 발생했고, 처음에는 onSubmit에서 전달하는 data에서 lat와 lng를 number 형태로 변경해서 전달하는 것으로 문제를 해결하려고 했지만 타입은 변경되지 않았습니다. 

계속해서 string 타입으로 데이터가 들어와서 스키마 타입을 변경해야 할지 고민하던 중 POST API에서 lat와 lng의 저장되는 값을 number로 수정하면 DB에도 number로 들어갈 거라는 생각으로 수행해서 다시 시도해 보니 가게 등록이 정상적으로 등록이 완료되었습니다. 

이전까지는 프론트엔드 위주로 프로젝트를 진행했다면, 이번 프로젝트는 Next.js를 사용하여 프론트엔드와 백엔드 모두를 작업했습니다. Next.js라는 새로운 프레임워크를 배우면서 프로젝트를 진행하니 적용하는 데 시간이 예상보다 오래 걸렸지만, API 라우트를 활용하여 백엔드 로직을 구현함으로써 프론트엔드와 백엔드 간의 데이터 통신을 원활하게 만들 수 있었습니다. 이 과정에서, 이전에는 URL을 페이지 구분 용도로만 사용했다면, 이제는 URL을 통해 데이터를 효과적으로 전달하고 관리하는 방법에 대해 고민하고 배울 수 있었습니다.
